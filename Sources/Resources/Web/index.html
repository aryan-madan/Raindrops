<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#FFFFFF">
    <title>Raindrops</title>
    <link rel="icon" type="image/svg+xml" href="/logo">
    <link rel="stylesheet" href="/style.css">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>
<body onclick="closeAllMenus(event)">

    <aside>
        <div class="brand">
            <img src="/logo" alt="logo"> Raindrops
        </div>
        
        <div class="upload-wrapper">
            <button class="btn-new" onclick="toggleMenu('dropdown-menu', event)">
                <i class="ph-bold ph-plus"></i> Upload
            </button>
            <div class="dropdown-menu" id="dropdown-menu">
                <div class="menu-item" onclick="triggerFile()">
                    <i class="ph-duotone ph-file-plus"></i> Files
                </div>
                <div class="menu-item" onclick="triggerFolder()">
                    <i class="ph-duotone ph-folder-plus"></i> Folder
                </div>
            </div>
        </div>

        <div class="nav-item active"><i class="ph ph-files"></i> All Files</div>
    </aside>

    <main>
        <header>
            <div class="mobile-brand">
                <img src="/logo" alt="R">
            </div>
            
            <div class="search-wrap">
                <i class="ph ph-magnifying-glass"></i>
                <input type="text" class="search-input" id="search" placeholder="Search..." onkeyup="filter()">
            </div>
            <div class="view-opts">
                <button class="view-btn active" id="btn-grid" onclick="setView('grid')"><i class="ph ph-squares-four"></i></button>
                <button class="view-btn" id="btn-list" onclick="setView('list')"><i class="ph ph-list-dashes"></i></button>
            </div>
        </header>

        <div class="scroll-wrapper">
            <div class="scroll-area">
                <div id="container" class="grid"></div>
            </div>
        </div>
    </main>

    <div class="fab" id="fab-btn" onclick="toggleMenu('fab-menu', event)"><i class="ph-bold ph-plus"></i></div>
    
    <div class="fab-menu" id="fab-menu">
        <div class="menu-item" onclick="triggerFile()">
            <i class="ph-duotone ph-file-plus"></i> Files
        </div>
        <div class="menu-item" onclick="triggerFolder()">
            <i class="ph-duotone ph-folder-plus"></i> Folder
        </div>
    </div>

    <div class="drag-shade" id="drag-shade">
        <div class="drag-content">
            <i class="ph-duotone ph-cloud-arrow-up" style="font-size: 64px;"></i>
            <span>Drop to Upload</span>
        </div>
    </div>

    <div class="preview-overlay" id="preview-overlay" onclick="closePreview()">
        <div class="preview-bar" onclick="event.stopPropagation()">
            <div class="preview-title" id="preview-title">Filename.jpg</div>
            <button class="preview-close" onclick="closePreview()"><i class="ph-bold ph-x"></i></button>
        </div>
        <div class="preview-content" id="preview-content" onclick="event.stopPropagation()">
            
        </div>
        <a href="#" class="preview-dl-btn" id="preview-dl" download onclick="event.stopPropagation()">
            <i class="ph-bold ph-download-simple"></i> Download
        </a>
    </div>

    <!-- Mini Audio Player -->
    <div class="mini-player" id="mini-player">
        <div class="mp-top">
            <div class="mp-icon"><i class="ph-fill ph-music-note"></i></div>
            <div class="mp-info">
                <div class="mp-title" id="mp-title">Song Title.mp3</div>
                <div class="mp-time" id="mp-time">0:00 / 0:00</div>
            </div>
            <div class="mp-controls">
                <button class="mp-btn" onclick="togglePlay()"><i class="ph-fill ph-play" id="mp-play-icon"></i></button>
                <button class="mp-btn close" onclick="closeAudio()"><i class="ph-bold ph-x"></i></button>
            </div>
        </div>
        <input type="range" class="mp-seek" id="mp-seek" min="0" value="0" step="0.1" oninput="seekAudio(this.value)">
        <audio id="audio-el" ontimeupdate="updateProgress()" onended="resetPlayer()"></audio>
    </div>

    <div class="toast" id="toast">File uploaded</div>

    <input type="file" id="file-input" hidden multiple onchange="handleFiles(this.files)">
    <input type="file" id="folder-input" hidden webkitdirectory onchange="handleFiles(this.files)">

    <script src="/app.js"></script>
</body>
</html>